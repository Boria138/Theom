#!/bin/bash

# This script sets up the de details that we might need to access later.
# Never edit files generated by `THEOM SCARY CONFIG DEMON`

TSCL_PATH="$HOME/.config/.THEOM_SYSTEM/&info&.tscd"
TSC="tscdctl"

[ ! -d "$HOME/.config/.THEOM_SYSTEM" ] && mkdir -p "$HOME/.config/.THEOM_SYSTEM"

if [ ! -f "$TSCL_PATH" ]; then
    $TSC --out "$TSCL_PATH" \
        --set config_version=1.0 first_run=false current_run=true
else
    PREV_VAL=$($TSC --out "$TSCL_PATH" --get first_run 2>/dev/null)

    if [ "$PREV_VAL" = "true" ]; then
        $TSC --out "$TSCL_PATH" \
            --set config_version=1.0 current_run=true \
            --flip first_run
    else
        $TSC --out "$TSCL_PATH" \
            --set config_version=1.0 current_run=false
    fi
fi
